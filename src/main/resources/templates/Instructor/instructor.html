<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:insert="~{/usuario/templates_usuario.html::head}"></head>

<body class="body" style="font-family: 'Segoe UI', sans-serif;">

	<header id="header" class="header d-flex align-items-center justify-content-between fixed-top w-100"
		style="background-color: rgba(0, 128, 64, 0.6); box-shadow: 0 5px 3px rgba(0,0,0,0.2);">
		<div class="container-fluid container-xl d-flex w-100 align-items-center justify-content-between">
			<h1 class="sitename m-0">
				<strong style="color:#ffffff;">TECH</strong>
				<span style="color:#ffffff;">ACCESS</span>
				<span style="color:#adb5bd;">/</span>
				<span style="color:#ffffff;">SENA - CIMM CIUDADELA</span>
			</h1>

			<div class="user-profile d-flex align-items-center">
				<span class="me-2 text-white fw-bold" th:text="${instructor.nombre}">Instructor</span>
				<div class="dropdown">
					<a class="d-flex align-items-center text-decoration-none text-white" dropdown-toggle
						data-bs-toggle="dropdown">
						<i class="bi bi-person-circle fs-4"></i>
					</a>
					<ul class="dropdown-menu dropdown-menu-end">
						<li><a class="dropdown-item" href="#"><i class="bi bi-person me-2"></i>Perfil</a></li>
						<li><a class="dropdown-item" th:href="@{/logout}"><i
									class="bi bi-box-arrow-right me-2"></i>Cerrar sesión</a></li>
					</ul>
				</div>
			</div>
		</div>
	</header>

	<div class="video-container2">
		<video class="video-background2" autoplay muted loop>
			<source th:src="@{/assets/vid/entradaS.mp4}" type="video/mp4">
			Error al cargar el video.
		</video>
	</div>

	<main class="main py-4" style="background-color: rgba(0, 124, 88, 0.05); margin-top: 100px;">
		<div class="container">
			<div class="row">

				<div class="col-lg-3 mb-4">
					<div class="user-nav rounded shadow-sm p-3 bg-white text-center">
						<img th:src="@{/images/instructor.png}" alt="Instructor.img"
							style="width: 120px; border-radius: 50%; border: 2px solid #007C58;">
						<h5 class="mt-2 mb-0" th:text="${instructor.nombre}">Instructor</h5>
						<small class="text-muted"><b>Área:</b> <span>Mecánica</span></small>
						<div class="mt-2">
							<span class="badge bg-success bg-opacity-10 text-success px-3 py-2">Activo</span>
						</div>

						<nav class="nav flex-column mt-4">
							<a href="#" class="btn btn-outline-success btn-sm mt-2" onclick="cargar('acceso')">
								<i class="bi bi-house me-2 text-success"></i> Últimas Entradas
							</a>
							<a href="#" class="btn btn-outline-success btn-sm mt-2" onclick="cargar('grupos')">
								<i class="bi bi-people me-2 text-success"></i> Grupos
							</a>
							<a href="#" class="btn btn-outline-success btn-sm mt-2" onclick="cargar('reportes')">
								<i class="bi bi-clipboard-data me-2 text-success"></i> Reportes
							</a>
						</nav>
					</div>
				</div>

				<div class="col-lg-9">
					<div id="contenido" class="access-card bg-white shadow-sm rounded p-4" style="opacity: 0.9;">
						<h4 class="text-success"><i class="bi bi-info-circle me-2"></i><b> Bienvenido, </b>
							<span th:text="${instructor.nombre}">Instructor</span>
						</h4>
						<p class="text-muted">Seleccione una opción del menú lateral para ver información.</p>
					</div>
				</div>

			</div>
		</div>
	</main>

	<!-- Secciones Laterales COMIENZO-->
	<!--Seccion enlazada con acceso -->

	<template id="tpl-acceso">
		<div th:fragment="listaAccesos">
				<div class="access-card bg-white shadow-sm rounded p-4" style="opacity: 0.95;">
					<h2 class="mb-4 text-success"><i class="bi bi-clock-history me-2"></i> Últimas Entradas</h2>
					<div class="card shadow-sm">
						<div class="card-body">
							<table class="table table-hover align-middle">
								<thead class="table-light">
									<tr>
										<th>Estudiante</th>
										<th>Área</th>
										<th>Fecha</th>
										<th>Estado</th>
										<th class="text-center">Acciones</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="entrada : ${accesos}">
										<td th:text="${entrada.usuario.nombre}">Juan Pérez</td>
										<td th:text="${entrada.areaJobs.nombre}">Idiomas</td>
										<td th:text="${#dates.format(entrada.horaIngreso, 'yyyy-MM-dd HH:mm')}">2025-09-20</td>
										<td>
											<span th:if="${entrada.estadoPermanencia.nombre == 'OK'}"
												class="badge bg-success bg-opacity-10 text-success px-3 py-2">OK</span>
											<span th:if="${entrada.estadoPermanencia.nombre != 'OK'}"
												class="badge bg-danger bg-opacity-10 text-danger px-3 py-2">NO OK</span>
										</td>
										<td class="text-center">
											<a th:href="@{'/acceso/editar/' + ${entrada.idacceso}}"
												class="btn btn-sm btn-outline-primary me-2"><i
													class="bi bi-pencil-square"></i></a>
											<a th:href="@{'/acceso/eliminar/' + ${entrada.idacceso}}"
												class="btn btn-sm btn-outline-danger"
												onclick="return confirm('¿Seguro que deseas eliminar esta entrada?');"><i
													class="bi bi-trash"></i></a>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
	</template>

	<!--Seccion enlazada con ficha -->

	<template id="tpl-grupos">
		<div class="access-card" style="background-color: rgba(0, 124, 88, 0.05);">
			<h2><i class="bi bi-people me-2"></i> Grupos</h2>
			<div class="row">

				<!-- Ficha N1 -->
				<div class="col-md-4 mb-4" each="#">
					<div class="card shadow-sm h-100">
						<div class="card-body text-center">
							<h5 class="card-title" text="#">Ficha Mec202302345 - Sog</h5>
							<p class="card-text text-muted"> Código: <span text="#">G123</span><br> Área: <span
									text="#">Mecánica</span> </p> <a href="#" class="btn btn-secondary btn-sm">Ver
								detalles</a>
						</div>
					</div>
				</div>

				<!-- Ficha N2 -->
				<div class="col-md-4 mb-4" each="#">
					<div class="card shadow-sm h-100">
						<div class="card-body text-center">
							<h5 class="card-title" text="#">Ficha TIcs202142375 - Dtma</h5>
							<p class="card-text text-muted"> Código: <span text="#">G106</span><br> Área: <span
									text="#">Tecnologias de la Informacion y Comunicaciónes</span> </p> <a href="#"
								class="btn btn-secondary btn-sm">Ver detalles</a>
						</div>
					</div>
				</div>

				<!-- Ficha N3 -->
				<div class="col-md-4 mb-4" each="#">
					<div class="card shadow-sm h-100">
						<div class="card-body text-center">
							<h5 class="card-title" text="#">Ficha TIcs202001374 - Sog</h5>
							<p class="card-text text-muted"> Código: <span text="#">G132</span><br> Área: <span
									text="#">Tecnologias de la Informacion y Comunicaciónes</span> </p> <a href="#"
								class="btn btn-secondary btn-sm">Ver detalles</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</template>
	<!--<template id="tpl-grupos">
		<div class="access-card bg-white shadow-sm rounded p-4" style="opacity: 0.95;">
			<h2 class="text-success"><i class="bi bi-people me-2"></i> Grupos</h2>
			<div class="row">
				<div class="col-md-4 mb-4" th:each="ficha : ${fichas}">
					<div class="card shadow-sm h-100">
						<div class="card-body text-center">
							<h5 class="card-title" th:text="${ficha.nombre}">Ficha</h5>
							<p class="card-text text-muted">
								Código: <span th:text="${ficha.codigo}">G123</span><br>
								Área: <span th:text="${ficha.area}">Área</span>
							</p>
							<a href="#" class="btn btn-outline-success btn-sm">Ver detalles</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</template>-->

	<!--Seccion enlazada con permiso -->

	<template id="tpl-reportes">
		<div class="access-card bg-white shadow-sm rounded p-4" style="opacity: 0.95;">
			<h2 class="text-success"><i class="bi bi-clipboard-data me-2"></i> Reportes</h2>
			<ul class="list-group">
				<li class="list-group-item" th:each="reporte : ${reportes}" th:text="${reporte.descripcion}">Reporte
				</li>
			</ul>
		</div>
	</template>

	<!-- Secciones Laterales FINAL-->

	<div th:insert="~{/usuario/templates_usuario.html::footer}"></div>
	<div th:insert="~{/usuario/templates_usuario.html::jsFiles}"></div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		function cargar(opcion) {
			const tpl = document.getElementById("tpl-" + opcion);
			if (tpl) {
				document.getElementById("contenido").innerHTML = tpl.innerHTML;
			}
		}
	</script>
</body>

</html>