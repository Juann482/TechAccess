<head th:fragment="head">

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>TechAcces | Vigilancia</title>

	<!-- Favicons -->
	<link th:href="@{/images/TecAccess.png}" rel="icon">
	<link th:href="@{/assets/img/apple-touch-icon.png}" rel="apple-touch-icon">

	<!-- Vendor CSS Files -->
	<link th:href="@{/assets/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
	<link th:href="@{/assets/vendor/bootstrap-icons/bootstrap-icons.css}" rel="stylesheet">
	<link th:href="@{/assets/vendor/aos/aos.css}" rel="stylesheet">
	<link th:href="@{/assets/vendor/swiper/swiper-bundle.min.css}" rel="stylesheet">
	<link th:href="@{/assets/vendor/glightbox/css/glightbox.min.css}" rel="stylesheet">

	<!-- Main CSS File -->
	<link th:href="@{/assets/css/main.css}" rel="stylesheet">
	
	<style>
	    /* ========== ESTILOS GENERALES ========== */
	    .centrados {
	        text-align: center;
	    }

	    .input-with-icon {
	        position: relative;
	    }

	    .input-with-icon i {
	        position: absolute;
	        top: 50%;
	        left: 12px;
	        transform: translateY(-50%);
	        color: #6c757d;
	        font-size: 1rem;
	        pointer-events: none;
	    }

	    .input-with-icon .form-control {
	        padding-left: 2.5rem; /* espacio para el ícono */
	    }

	    .oculto {
	        display: none;
	    }
	    
	    /* ========== ESTILOS DE TABLAS Y BADGES ========== */
	    .table-header-blue {
	        background-color: #1e3a8a !important; /* Azul oscuro */
	        color: white !important;
	    }
	    
	    .table-header-blue th {
	        color: white !important;
	        font-weight: 600;
	        border-bottom: 2px solid #3b82f6;
	    }
	    
	    .user-inside-row {
	        background-color: #e0f2fe !important; /* Azul celeste claro */
	        transition: background-color 0.8s;
	    }
	    
	    .user-inside-row:hover {
	        background-color: #bae6fd !important; /* Azul celeste más oscuro al hover */
	    }
	    
	    .user-outside-row {
	        background-color: white !important;
	    }
	    
	    .user-outside-row:hover {
	        background-color: #f8fafc !important; /* Gris muy claro al hover */
	    }
	    
	    .badge-inside {
	        background-color: #3b82f6 !important; /* Azul para DENTRO */
	        color: white;
	    }
	    
	    .badge-outside {
	        background-color: #6b7280 !important; /* Gris para FUERA */
	        color: white;
	    }
	    
	    .badge-aprendiz {
	        background-color: #8b5cf6 !important; /* Violeta */
	    }
	    
	    .badge-funcionario {
	        background-color: #10b981 !important; /* Verde */
	    }
	    
	    .badge-visitante {
	        background-color: #f59e0b !important; /* Naranja */
	    }
	    
	    .badge-administrador {
	        background-color: #ef4444 !important; /* Rojo */
	    }
	    
	    .badge-instructor {
	        background-color: #ec4899 !important; /* Rosa */
	    }
	    
	    .badge {
	        font-size: 0.85em;
	        padding: 0.35em 0.65em;
	    }
	    
	    /* ========== ESTILOS DE MODALES ========== */
	    .light-blue-modal .modal-content {
	        background-color: #f0f9ff !important; /* Celeste muy claro */
	        border: 1px solid #bae6fd;
	        border-radius: 0.5rem;
	    }
	    
	    .light-blue-modal .modal-header {
	        background-color: #38bdf8 !important; /* Azul celeste */
	        color: white !important;
	        border-bottom: 2px solid #0ea5e9;
	        border-radius: 0.5rem 0.5rem 0 0;
	    }
	    
	    .light-blue-modal .modal-body {
	        background-color: #f0f9ff !important;
	        padding: 1.5rem;
	    }
	    
	    .light-blue-modal .modal-footer {
	        background-color: #f0f9ff !important;
	        border-top: 1px solid #dbeafe;
	        border-radius: 0 0 0.5rem 0.5rem;
	    }
	    
	    .light-blue-modal .modal-title {
	        color: white !important;
	        font-weight: 600;
	        font-size: 1.25rem;
	    }
	    
	    .light-blue-modal .btn-close {
	        filter: invert(1) brightness(2);
	        opacity: 0.8;
	    }
	    
	    .light-blue-modal .btn-close:hover {
	        opacity: 1;
	    }
	    
	    .light-blue-modal .form-label {
	        color: #1e3a8a !important; /* Azul oscuro */
	        font-weight: 500;
	        margin-bottom: 0.5rem;
	    }
	    
	    .light-blue-modal .form-control,
	    .light-blue-modal .form-select {
	        background-color: white;
	        border: 1px solid #93c5fd;
	        color: #1e3a8a;
	    }
	    
	    .light-blue-modal .form-control:focus,
	    .light-blue-modal .form-select:focus {
	        background-color: white;
	        border-color: #3b82f6;
	        box-shadow: 0 0 0 0.25rem rgba(59, 130, 246, 0.25);
	        color: #1e3a8a;
	    }
	    
	    .light-blue-modal .input-group-text {
	        background-color: #dbeafe;
	        border-color: #93c5fd;
	        color: #1e3a8a;
	    }
	    
	    .light-blue-modal hr {
	        border-top: 2px solid #dbeafe;
	        opacity: 1;
	        margin: 1.5rem 0;
	    }
	    
	    .light-blue-modal h6 {
	        color: #1e3a8a;
	        font-weight: 600;
	    }
	    
	    .light-blue-modal .btn-secondary {
	        background-color: #94a3b8;
	        border-color: #94a3b8;
	        color: white;
	    }
	    
	    .light-blue-modal .btn-secondary:hover {
	        background-color: #64748b;
	        border-color: #64748b;
	    }
	    
	    .light-blue-modal .btn-success {
	        background-color: #10b981;
	        border-color: #10b981;
	        color: white;
	    }
	    
	    .light-blue-modal .btn-success:hover {
	        background-color: #059669;
	        border-color: #059669;
	    }
	    
	    .light-blue-modal .btn-primary {
	        background-color: #3b82f6;
	        border-color: #3b82f6;
	        color: white;
	    }
	    
	    .light-blue-modal .btn-primary:hover {
	        background-color: #2563eb;
	        border-color: #2563eb;
	    }
	    
	    .light-blue-modal .btn-outline-danger {
	        color: #ef4444;
	        border-color: #ef4444;
	    }
	    
	    .light-blue-modal .btn-outline-danger:hover {
	        background-color: #ef4444;
	        color: white;
	    }
	    
	    /* ========== ESTILOS DE BOTONES Y LAYOUT ========== */
	    .filter-buttons-container {
	        display: flex;
	        justify-content: space-between;
	        align-items: center;
	        margin-bottom: 1rem;
	    }
	    
	    .scanner-container {
	        display: flex;
	        align-items: center;
	        gap: 1rem;
	    }
	    
	    .right-buttons {
	        display: flex;
	        gap: 0.5rem;
	    }
	    
	    /* ========== ESTILOS DE PAGINACIÓN ========== */
	    .page-item.active .page-link {
	        background-color: rgb(0, 255, 255);
	        border-color: rgb(0, 255, 255);
	        color: darkblue;
	    }
	    
	    .page-link {
	        color: #1e40af;
	    }
	    
	    .page-link:hover {
	        color: rgb(0, 255, 255);
	        background-color: rgb(0, 0, 64);
	    }
	    
	    /* ========== ESTILOS DE BOTONES FLOTANTES ========== */
	    .floating-buttons {
	        position: fixed;
	        bottom: 30px;
	        right: 30px;
	        z-index: 1000;
	        display: flex;
	        flex-direction: column;
	        gap: 10px;
	    }
	    
	    .btn-floating {
	        width: 50px;
	        height: 50px;
	        border-radius: 50%;
	        display: flex;
	        align-items: center;
	        justify-content: center;
	        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
	        transition: all 0.3s;
	    }
	    
	    .btn-floating:hover {
	        transform: translateY(-3px);
	        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
	    }
	</style>
		<!-- =======================================================
	  * Template Name: NiceAdmin
	  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
	  * Updated: Apr 20 2024 with Bootstrap v5.3.3
	  * Author: BootstrapMade.com
	  * License: https://bootstrapmade.com/license/
	  ======================================================== -->

</head>

<!--=========================== INGRESOS =============================-->

<div th:fragment="Ingresos">
	<header id="header" class="header d-flex align-items-center fixed-top">
		<div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

			<a href="#" class="logo d-flex align-items-center">
				<img th:src="@{/images/TecAccess.png}" alt="LogoPrin">
				<h1 class="sitename"><b style="color: rgb(14, 209, 220);">TECH</b>ACCESS <b
						style="color: rgb(14, 209, 220);">|</b> SENA</h1>
			</a>

			<nav id="navmenu" class="navmenu">
				<ul>
					<li><a href="#" class="active"><b>Ingresos</b></a></li>
				 
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
							aria-expanded="false">
							Opciones
						</a>
						<ul class="dropdown-menu">

							<li><a class="dropdown-item" th:href="@{/Vigilancia/DispositivosVisit}">Dispositivos</a>
							</li>
							<li>
								<hr class="dropdown-divider">
							</li>
							<li><a class="dropdown-item" th:href="@{/Vigilancia/DispositivosUSER}">Dispositivos
									usuarios</a></li>
							<li><a class="dropdown-item" th:href="@{/Vigilancia/RDU}">Registro</a></li>

						</ul>
					</li>
					<li><a href="#" th:text="${session.nombre}"></a></li>
				</ul>
				<i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
			</nav>

		</div>
	</header>

</div>

<!--=========================== VISITANTES =============================-->

<div th:fragment="visitantes">
	<header id="header" class="header d-flex align-items-center fixed-top">
		<div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

			<a href="#" class="logo d-flex align-items-center">
				<img th:src="@{/images/TecAccess.png}" alt="LogoPrin">
				<h1 class="sitename"><b style="color: rgb(14, 209, 220);">TECH</b>ACCESS <b
						style="color: rgb(14, 209, 220);">|</b> SENA</h1>
			</a>

			<nav id="navmenu" class="navmenu">
				<ul>
					<li><a th:href="@{/Vigilancia/Ingreso}">Ingresos</a></li>
				 
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
							aria-expanded="false">
							<b>Opciones</b>
						</a>
						<ul class="dropdown-menu">
							 
							<li><a class="dropdown-item" th:href="@{/Vigilancia/DispositivosVisit}">Dispositivos</a>
							</li>
							<li>
								<hr class="dropdown-divider">
							</li>
							<li><a class="dropdown-item" th:href="@{/Vigilancia/DispositivosUSER}">Dispositivos
									usuarios</a></li>
							<li><a class="dropdown-item" th:href="@{/Vigilancia/RDU}">Registro</a></li>
						</ul>
					</li>
					<li><a href="#" th:text="${session.nombre}"></a></li>
				</ul>
				<i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
			</nav>

		</div>
	</header>

</div>

<!--=========================== DISPOSITIVOS =============================-->

<div th:fragment="dispositivoVisitante">
	<header id="header" class="header d-flex align-items-center fixed-top">
		<div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

			<a href="#" class="logo d-flex align-items-center">
				<img th:src="@{/images/TecAccess.png}" alt="LogoPrin">
				<h1 class="sitename"><b style="color: rgb(14, 209, 220);">TECH</b>ACCESS <b
						style="color: rgb(14, 209, 220);">|</b> SENA</h1>
			</a>

			<nav id="navmenu" class="navmenu">
				<ul>
					<li><a th:href="@{/Vigilancia/Ingreso}">Ingresos</a></li>
				 
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
							aria-expanded="false">
							<b>Opciones</b>
						</a>
						<ul class="dropdown-menu">
							 
							<li><a class="dropdown-item" th:href="@{/Vigilancia/DispositivosVisit}">Dispositivos</a>
							</li>
							<li>
								<hr class="dropdown-divider">
							</li>
							<li><a class="dropdown-item" th:href="@{/Vigilancia/DispositivosUSER}">Dispositivos	usuarios</a></li>
							<li><a class="dropdown-item" th:href="@{/Vigilancia/RDU}">Registro</a></li>
						</ul>
					</li>
					<li><a href="#" th:text="${session.nombre}"></a></li>
				</ul>
				<i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
			</nav>

		</div>
	</header>
</div>

<!--=========================== FOOTER =============================-->

<div th:fragment="footer" style=" position: bottom; width: 100%;">

	<footer id="footer" class="footer position-relative dark-background" style="text-align: center;">
		<div class="container copyright text-center mt-4">
			<p>© <span>Copyright</span> <strong class="px-1 sitename">TechAccess</strong> <span>Todos los derechos
					reservados.</span></p>
			<div class="credits">
				<!-- All the links in the footer should remain intact. -->
				<!-- You can delete the links only if you've purchased the pro version. -->
				<!-- Licensing information: https://bootstrapmade.com/license/ -->
				<!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
				Diseñado por <a href="#"><b>TECH</b>ACCESS</a>
			</div>
		</div>
	</footer>
	<!-- Scroll Top -->
	<a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i
			class="bi bi-arrow-up-short"></i></a>
</div>

<!--=========================== SCRIPS =============================-->

<div th:fragment="jsFiles">
    <!-- Vendor JS Files -->
    <script th:src="@{/assets/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/assets/vendor/php-email-form/validate.js}"></script>
    <script th:src="@{/assets/vendor/aos/aos.js}"></script>
    <script th:src="@{/assets/vendor/purecounter/purecounter_vanilla.js}"></script>
    <script th:src="@{/assets/vendor/imagesloaded/imagesloaded.pkgd.min.js}"></script>
    <script th:src="@{/assets/vendor/isotope-layout/isotope.pkgd.min.js}"></script>
    <script th:src="@{/assets/vendor/swiper/swiper-bundle.min.js}"></script>
    <script th:src="@{/assets/vendor/glightbox/js/glightbox.min.js}"></script>
    
    <!-- IMPORTANTE: SweetAlert debe estar aquí -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <!-- Script para mostrar SweetAlerts desde flash messages -->
    <script th:inline="javascript" th:if="${mensaje}">
        const icono = /*[[${tipo}]]*/ "";
        const texto = /*[[${mensaje}]]*/ "";
        
        Swal.fire({
            icon: icono,
            title: texto,
            timer: 2500,
            showConfirmButton: false
        });
    </script>
    
    <!-- Script para registro de scanner automático -->
    <script>
        function registrarAccesoScanner(codigo) {
            if (!codigo || codigo.trim() === "") return;
            
            fetch("/Vigilancia/registrar-scan", {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                },
                body: `documento=${encodeURIComponent(codigo.trim())}`
            })
            .then(resp => {
                if (!resp.ok) {
                    throw new Error('Error en la respuesta del servidor');
                }
                return resp.json(); // IMPORTANTE: .json() no .text()
            })
            .then(data => {
                Swal.fire({
                    icon: data.tipo,
                    title: data.mensaje,
                    timer: 2000,
                    showConfirmButton: false
                });
                
                // Recargar después de 1.5 segundos
                setTimeout(() => {
                    location.reload();
                }, 1500);
            })
            .catch(err => {
                console.error("Error:", err);
                Swal.fire({
                    icon: "error",
                    title: "Error al registrar el acceso",
                    text: "Intente nuevamente o contacte al administrador",
                    timer: 3000
                });
            });
        }
        
        // Función para mostrar/ocultar campos de dispositivo (si existe)
        function mostrarCampos() {
            const opcion = document.getElementById("opcion");
            const campos = document.getElementById("camposExtra");
            
            if (opcion && campos) {
                if (opcion.value === "si") {
                    campos.classList.remove("oculto");
                } else {
                    campos.classList.add("oculto");
                }
            }
        }
    </script>
    
    <!-- Main JS File -->
    <script th:src="@{/assets/js/main.js}"></script>
</div>

</html>