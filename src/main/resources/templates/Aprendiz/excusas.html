<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:insert="~{templates_usuario::head}">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body class="contact-page" style="font-family: 'Segoe UI', sans-serif;">
	<!-- Encabezado -->

	<header id="header" class="header d-flex align-items-center fixed-top">
		<div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

			<a th:href="@{/usuario/home}" class="logo d-flex align-items-center">
				<img th:src="@{/images/TecAccess.png}" alt="LogoPrin">
				<h1 class="sitename">
					<b style="color: rgb(14, 209, 220);">TECH</b>ACCESS
					<b style="color: rgb(14, 209, 220);">|</b> SENA
				</h1>
			</a>

			<nav id="navmenu" class="navmenu">
				<ul>
					<li><a th:href="@{/Aprendiz/aprendiz}">Aprendiz</a></li>
					<li><a th:href="@{/Aprendiz/excusas}" class="active"><b>Excusas</b></a></li>
					<li><a th:href="@{/Aprendiz/Horario}">Horario</a></li>

				</ul>
				<i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
			</nav>

			<div class="user-menu-container">
				<div class="user-info" id="toggleMenu">
					<img th:src="@{/images/user.jpg}" alt="Avatar" class="avatar">
					<div>
						<span class="" th:text="${usuario != null ? usuario.nombre : ' - '}"></span>
						<span class="user-role">Administrador</span>
					</div>
				</div>

				<div class="dropdown-menu" id="dropdownMenu">
					<div class="dropdown-header">
						<img th:src="@{/images/user.jpg}" alt="Avatar Grande" class="avatar-large">
						<div>
							<span class="" th:text="${usuario != null ? usuario.nombre : ' - '}"></span>
							<span class="" th:text="${usuario != null ? usuario.email : ' - '}"></span>
						</div>
					</div>

					<ul class="menu-options">
						<li><a id="openProfile"><i class="fas fa-user-circle"></i> Ver perfil</a></li>

						<li><a th:href="@{/Aprendiz/detalleExcusa}"><i class="fas fa-history"></i> Ver historial de
								excusa</a></li>
						<li class="logout"><a th:href="@{/logout}"><i class="fas fa-sign-out-alt"></i> Cerrar sesi√≥n</a>
						</li>

					</ul>
				</div>
			</div>

		</div>
	</header>


	<!-- Contenido principal -->
	<main class="main" style="background-color: rgba(0, 124, 88, 0.05); min-height: 100vh;">

		<div class="page-title dark-background text-center"
			th:style="'background-image: url(' + @{/images/fondo.jpeg} + '); background-size: cover; background-position: center; padding-top: 150px; padding-bottom: 50px;'">
			<div class="container position-relative">
				<h1 class="text-white fw-bold mb-3">Excusas</h1>
			</div>
		</div>

		<div class="container py-5">
			<div class="row g-4">
			</div>
		</div>

		<!-- üîπ Fondo de video a pantalla completa 
			<div class="video-container2 position-fixed top-0 start-0 w-100 h-100 overflow-hidden"
				style="z-index: -1; opacity: 1;">

				<video class="video-background2 w-100 h-100 object-fit-cover" autoplay muted loop playsinline>
					<source th:src="@{/assets/vid/entradaS.mp4}" type="video/mp4">
					Tu navegador no soporta videos en HTML5.
				</video>
			</div>
		 -->


		<!-- üîπ CONTENIDO PRINCIPAL -->

		<main class="main" style="background-color: rgba(0, 124, 88, 0.05); min-height: 100vh;">
			<div class="page-title black-background text-center py-5">
				<div class="container position-relative">
					<div class="container">
						<div class="row">

							<!-- üî∏ MEN√ö LATERAL -->


							<!-- üî∏ FORMULARIO PRINCIPAL -->


							<div class="col-lg-11 mx-auto px-4">
								<div class="access-card bg-white rounded-3 shadow-sm p-4 " style="opacity: 0.95;">
									<section class="section dashboard">
										<div class="card-body">

											<h4 class="mb-3" style="color: rgb(14, 209, 220);">
												<i class="bi bi-clipboard-check me-2"
													style="color: rgb(14, 209, 220);"></i><b>Registrar
													Excusa</b>
											</h4>
											<div th:if="${error}" class="alert alert-danger mt-3"
												style="color: rgb(14, 209, 220);" th:text="${error}">
											</div>
											<form th:action="@{/Aprendiz/save}" method="post"
												enctype="multipart/form-data">

												<div class="mb-3 row" style="color: rgb(14, 209, 220)">
													<label
														class="col-sm-3 col-form-label fw-semibold text-success; ">Nombre
														y
														apellidos:</label>
													<div class="col-sm-9">
														<input type="text" class="form-control" id="nombres"
															name="nombres"
															th:value="${usuario != null ? usuario.nombre : ' - '}"
															readonly>

													</div>
												</div>

												<div class="mb-3 row" style="color: rgb(14, 209, 220)">
													<label
														class="col-sm-3 col-form-label fw-semibold text-success; ">Documento:</label>
													<div class="col-sm-9">
														<input type="number" class="form-control" id="ndocumento"
															name="ndocumento"
															th:value="${usuario != null ? usuario.documento : ' - '}"
															readonly>
													</div>
												</div>

												<div class="mb-3 row" style="color: rgb(14, 209, 220)">
													<label
														class="col-sm-3 col-form-label fw-semibold text-success; ">N√∫mero
														de
														ficha:</label>
													<div class="col-sm-9">
														<input type="number" class="form-control mb-2" id="fichaasd"
															name="fichaasd"
															th:value="${ficha != null ? ficha.numFicha : ' - '}"
															readonly>

														<input type="hidden" th:name="ficha.id"
															th:value="${ficha != null ? ficha.id : 0}">
													</div>
												</div>

												<div class="mb-3 row" style="color: rgb(14, 209, 220)">
													<label
														class="col-sm-3 col-form-label fw-semibold text-success; ">Motivo
														de
														inasistencia:</label>
													<div class="col-sm-9">
														<select class="form-control" id="motivo" name="motivo" required>
															<option value="">*** Seleccionar ***
															</option>
															<option value="Enfermedad">Enfermedad
															</option>
															<option value="Incapacidad m√©dica">
																Incapacidad
																m√©dica
															</option>
															<option value="Derecho al voto">Derecho al
																voto
															</option>
															<option value="Calamidad dom√©stica">
																Calamidad
																dom√©stica
															</option>
															<option value="Otro">Otro</option>
														</select>
													</div>
												</div>
												<div class="mb-3 row" style="color: rgb(14, 209, 220)">
													<label
														class="col-sm-3 col-form-label fw-semibold text-success; ">Descripcion
														:</label>
													<div class="col-sm-9">
														<div class="form-group">
															<div class="input-with-icon">
																<input type="text" class="form-control" id="descripcion"
																	name="descripcion"
																	placeholder="Motivo de inasistencia: "
																	autocomplete="off">
															</div>
														</div>
													</div>
												</div>

												<div class="mb-3 row" style="color: rgb(14, 209, 220)">
													<label
														class="col-sm-3 col-form-label fw-semibold text-success; ">Fecha:</label>
													<div class="col-sm-9">
														<input type="date" class="form-control" id="fecha" name="fecha"
															required>
													</div>
												</div>

												<div class="mb-3 row" style="color: rgb(14, 209, 220)">
													<label
														class="col-sm-3 col-form-label fw-semibold text-success; ">Soporte:</label>
													<div class="col-sm-9">
														<input type="file" class="form-control" name="img"
															accept=".pdf,.jpg,.png" required>

														<small class="text-muted">Adjunte un soporte de la
															inasistencia
															(PDF o
															imagen).</small>
													</div>
												</div>
												<div class="text-end" style="color: rgb(14, 209, 220)">
													<form th:action="@{/Aprendiz/save}" method="post"
														enctype="multipart/form-data" id="formExcusa">
														<!-- tus campos aqu√≠ -->
														<div class="text-end">
															<button type="button" class="btn"
																style="background-color: rgb(14, 209, 220); border-color: rgb(14, 209, 220); color: white;"
																onclick="confirmarGuardado()">
																<i class="bi bi-send-plus me-2"></i>
																Guardar Excusa
															</button>

														</div>
													</form>
												</div>
									</section>
								</div>
							</div>

						</div>
					</div>
				</div>
		</main>

		<div th:insert="~{/Aprendiz/aprendiz.html::modal}"></div>

		<!-- üîπ FOOTER -->
		<div th:insert="~{/templates_usuario.html::footer}"></div>
		<div th:insert="~{/templates_usuario.html::jsFiles}"></div>

		<div th:insert="~{/Aprendiz/aprendiz.html::style}"></div>
		<div th:insert="~{/Aprendiz/aprendiz.html::jsFiles}"></div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>



</body>

</html>


<script>
	function confirmarGuardado() {
		if (confirm("¬øDeseas guardar la informaci√≥n de la excusa?")) {
			document.querySelector("form").submit();
		}
	}
	function mostrarQR() {
		const qr = document.getElementById("codigoQR");
		qr.style.display = (qr.style.display === "none" || qr.style.display === "") ? "block" : "none";
	}
</script>