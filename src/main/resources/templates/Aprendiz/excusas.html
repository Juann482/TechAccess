<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:insert="~{/templates_usuario.html::head}"></head>

<body class="contact-page" style="font-family: 'Segoe UI', sans-serif;">

	<!-- Encabezado -->

	<header id="header" class="header d-flex align-items-center fixed-top">
		<div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

			<a th:href="@{/usuario/home}" class="logo d-flex align-items-center">
				<img th:src="@{/images/TecAccess.png}" alt="LogoPrin">
				<h1 class="sitename"><b style="color: rgb(14, 209, 220);">TECH</b>ACCESS <b
						style="color: rgb(14, 209, 220);">|</b> SENA</h1>
			</a>

			<nav id="navmenu" class="navmenu">
				<ul>
					<li><a th:href="@{/Aprendiz/aprendiz}">Aprendiz</a></li>
					<li><a href="#" class="active"><b>Excusas</b></a></li>
					<li><a th:href="@{/Aprendiz/Horario}">Horario</a></li>
					<li><a th:href="@{/usuario/home}">Inicio</a></li>

				</ul>
				<i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
			</nav>

		</div>
	</header>


	<main class="main" style="background-color: rgba(0, 124, 88, 0.05); min-height: 100vh;">



		<!-- Contenido principal -->
		<main class="main" style="background-color: rgba(0, 124, 88, 0.05); min-height: 100vh;">

			<!-- Encabezado de pÃ¡gina -->
			<div class="page-title dark-background text-center py-5"
				th:style="'background-image: url(' + @{/images/fondo.jpeg} + '); background-size: cover; background-position: center;'">
				<div class="container position-relative">
					<h1 class="text-white fw-bold mb-3">Excusas</h1>
					<nav class="breadcrumbs">
						<ol class="breadcrumb justify-content-center">



							<li>
								<!-- <a th:href="@{/Aprendiz/aprendiz}" class="text-white text-decoration-none"><b>Aprendiz</b></a> -->
							</li>
						</ol>
					</nav>
				</div>
			</div>

			<!-- ðŸ”¹ Fondo de video a pantalla completa 
			<div class="video-container2 position-fixed top-0 start-0 w-100 h-100 overflow-hidden"
				style="z-index: -1; opacity: 1;">

				<video class="video-background2 w-100 h-100 object-fit-cover" autoplay muted loop playsinline>
					<source th:src="@{/assets/vid/entradaS.mp4}" type="video/mp4">
					Tu navegador no soporta videos en HTML5.
				</video>
			</div>
		 -->


			<!-- ðŸ”¹ CONTENIDO PRINCIPAL -->

			<main class="main" style="background-color: rgba(0, 124, 88, 0.05); min-height: 100vh;">
				<div class="page-title black-background text-center py-5"
					th:style="'background-image: url(' + @{/images/fondo.jpeg} + '); background-size: cover; background-position: center;'">
					<div class="container position-relative">
						<div class="container">
							<div class="row">

								<!-- ðŸ”¸ MENÃš LATERAL -->
								<div class="col-lg-3 mb-4">
									<div class="user-nav rounded shadow-sm p-3 bg-white">

										<div class="text-center mb-3">
											<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTyPko2ajUOpOXvihi71Rccu8kXmRXPhnkOKA&s"
												alt="Foto de perfil"
												style="width: 120px; border-radius: 50%; border: 2px solid #007C58;">
										</div>

										<div class="info-list">
											<div class="border rounded p-2 mb-3 bg-light">
												<p class="mb-0 text-success fw-semibold">
													Nombre Aprendiz:
													<span class="text-dark"
														th:text="${usuario != null ? usuario.nombre : ' - '}"></span>
												</p>
											</div>

											<div class="border rounded p-2 mb-3 bg-light">
												<p class="mb-0 text-success fw-semibold">
													Programa:
													<span class="text-dark"
														th:text="${ficha != null ? ficha.nombrePrograma : ' - '}"></span>
												</p>
											</div>

											<div class="border rounded p-2 mb-3 bg-light">
												<p class="mb-0 text-success fw-semibold">
													Ficha:
													<span class="text-dark"
														th:text="${ficha != null ? ficha.numFicha : ' - '}"></span>
												</p>
											</div>


										</div>
										<nav class="nav flex-column text-center">
											<a th:href="@{/usuario/home}" class="btn btn-outline-success btn-sm mt-2">
												<i class="bi bi-box-arrow-left text-success"></i> Salir
											</a>

											<a href="#" class="btn btn-outline-success btn-sm mt-2"
												onclick="mostrarQR(); return false;">
												<i class="bi bi-qr-code me-2 text-success"></i> CÃ³digo
											</a>

											<div class="codigo-container my-4" id="codigoQR" style="display:none;">
												<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSMnbU2i2ZVheiCtFIK6xZnSBE0fSikFVjM-Q&s"
													alt="CÃ³digo QR" class="img-fluid" style="max-width: 220px;">
											</div>

											<a th:href="@{/Aprendiz/Horario}"
												class="btn btn-outline-success btn-sm mt-2">
												<i class="bi bi-calendar3 text-success me-2"></i> Ver horario
											</a>

											<a th:href="@{/Aprendiz/detalleExcusa}"
												class="btn btn-outline-success btn-sm mt-2">
												<i class="bi bi-gear me-2 text-success"></i> Ver hsitorial de excusas
											</a>
										</nav>
									</div>
								</div>

								<!-- ðŸ”¸ FORMULARIO PRINCIPAL -->


								<div class="col-lg-9">
									<div class="access-card bg-white rounded-3 shadow-sm p-4 " style="opacity: 0.95;">
										<section class="section dashboard">
											<div class="card-body">
												<h4 class="text-success mb-4"><i
														class="bi bi-clipboard-check me-2"></i><b>Registrar
														Excusa</b></h4>
												<div th:if="${error}" class="alert alert-danger mt-3"
													th:text="${error}">
												</div>
												<form th:action="@{/Aprendiz/save}" method="post"
													enctype="multipart/form-data">

													<div class="mb-3 row">
														<label
															class="col-sm-3 col-form-label fw-semibold text-success">Nombre
															y
															apellidos:</label>
														<div class="col-sm-9">
															<input type="text" class="form-control" id="nombres"
																name="nombres"
																th:value="${usuario != null ? usuario.nombre : ' - '}"
																readonly>

														</div>
													</div>

													<div class="mb-3 row">
														<label
															class="col-sm-3 col-form-label fw-semibold text-success">Documento:</label>
														<div class="col-sm-9">
															<input type="number" class="form-control" id="ndocumento"
																name="ndocumento"
																th:value="${usuario != null ? usuario.documento : ' - '}"
																readonly>
														</div>
													</div>

													<div class="mb-3 row">
														<label
															class="col-sm-3 col-form-label fw-semibold text-success">NÃºmero
															de
															ficha:</label>
														<div class="col-sm-9">
															<input type="number" class="form-control mb-2" id="fichaasd"
																name="fichaasd"
																th:value="${ficha != null ? ficha.numFicha : ' - '}"
																readonly>
															<input type="hidden" th:field="*{ficha.idFicha}"
																th:value="${ficha != null ? ficha.idFicha : 0}">
														</div>
													</div>

													<div class="mb-3 row">
														<label
															class="col-sm-3 col-form-label fw-semibold text-success">Motivo
															de
															inasistencia:</label>
														<div class="col-sm-9">
															<select class="form-control" id="motivo" name="motivo"
																required>
																<option value="">*** Seleccionar ***
																</option>
																<option value="Enfermedad">Enfermedad
																</option>
																<option value="Incapacidad mÃ©dica">
																	Incapacidad
																	mÃ©dica
																</option>
																<option value="Derecho al voto">Derecho al
																	voto
																</option>
																<option value="Calamidad domÃ©stica">
																	Calamidad
																	domÃ©stica
																</option>
																<option value="Otro">Otro</option>
															</select>
														</div>
														<label
															class="col-sm-3 col-form-label fw-semibold text-success">Descripcion
															:</label>
														<div class="col-sm-9">
															<div class="form-group">
																<div class="input-with-icon">
																	<input type="text" class="form-control"
																		id="descripcion" name="descripcion"
																		placeholder="Motivo de inasistencia: "
																		autocomplete="off">
																</div>
															</div>

														</div>

														<div class="mb-3 row">
															<label
																class="col-sm-3 col-form-label fw-semibold text-success">Fecha:</label>
															<div class="col-sm-9">
																<input type="date" class="form-control" id="fecha"
																	name="fecha" required>
															</div>
														</div>

														<div class="mb-3 row">
															<label
																class="col-sm-3 col-form-label fw-semibold text-success">Soporte:</label>
															<div class="col-sm-9">
																<input type="file" class="form-control" name="img"
																	accept=".pdf,.jpg,.png" required>

																<small class="text-muted">Adjunte un soporte
																	de la
																	inasistencia
																	(PDF o
																	imagen).</small>
															</div>
														</div>




														<div class="text-end">
															<form th:action="@{/Aprendiz/save}" method="post"
																enctype="multipart/form-data" id="formExcusa">
																<!-- tus campos aquÃ­ -->
																<div class="text-end">
																	<button type="button" class="btn btn-success"
																		onclick="confirmarGuardado()">
																		<i class="bi bi-send-plus me-2"></i>
																		Guardar
																		Excusa
																	</button>
																</div>
															</form>
														</div>
										</section>
									</div>
								</div>

							</div>
						</div>
					</div>
			</main>

			<!-- ðŸ”¹ FOOTER -->
			<div th:insert="~{/usuario/templates_usuario.html::footer}"></div>
			<div th:insert="~{/usuario/templates_usuario.html::jsFiles}"></div>

			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>



</body>

</html>


<script>
	function confirmarGuardado() {
		if (confirm("Â¿Deseas guardar la informaciÃ³n de la excusa?")) {
			document.querySelector("form").submit();
		}
	}
	function mostrarQR() {
		const qr = document.getElementById("codigoQR");
		qr.style.display = (qr.style.display === "none" || qr.style.display === "") ? "block" : "none";
	}
</script>