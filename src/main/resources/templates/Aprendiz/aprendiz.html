<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:insert="~{/Aprendiz/templates_aprendiz.html::head}"></head>

<body class="contact-page">

	<div th:insert="~{/Aprendiz/templates_aprendiz.html::header}"></div>
	<div th:insert="~{/Aprendiz/templates_aprendiz.html::style}"></div>

	<main class="main">

		<div class="page-title dark-background text-center"
			th:style="'background-image: url(' + @{/images/fondo.jpeg} + '); background-size: cover; background-position: center; padding-top: 150px; padding-bottom: 50px;'">
			<div class="container position-relative">
				<h1 class="text-white fw-bold mb-3">Aprendiz</h1>
			</div>
		</div>

		<div class="container py-5">
			<div class="row g-4">
			</div>
		</div>





		<!-- TARJETA PRINCIPAL -->
		<div class="col-lg-11 mx-auto px-4">
			<div class="access-card bg-white rounded-3 shadow-sm p-4" style="opacity: 0.95;">
				<h4 class="mb-3" style="color: rgb(14, 209, 220);">
					<i class="bi bi-qr-code me-2" style="color: rgb(14, 209, 220);"></i><b>Referencia de Acceso</b>
				</h4>




				<div id="profileModal" class="modal">
					<div class="modal-content">
						<span class="close-modal">&times;</span>
						<h2>Perfil del Usuario</h2>

						<div class="profile-info">
							<img th:src="@{/images/user.jpg}" alt="Avatar Grande" class="avatar-large">
							<div class="info-list">

								<div class="border rounded p-2 mb-3 bg-light">
									<p class="mb-0 text-success fw-semibold">
										<span class="text-dark"
											th:text="${usuario != null ? usuario.nombre : ' - '}"></span>
									</p>
								</div>

								<div class="border rounded p-2 mb-3 bg-light">
									<p class="mb-0 text-success fw-semibold">
										<span class="text-dark"
											th:text="${ficha != null ? ficha.nombrePrograma : ' - '}"></span>
									</p>
								</div>

								<div class="border rounded p-2 mb-3 bg-light">
									<p class="mb-0 text-success fw-semibold">
										<span class="text-dark"
											th:text="${ficha != null ? ficha.numFicha : ' - '}"></span>
									</p>
								</div>

							</div>
						</div>
					</div>
				</div>





				<!--
				<div class="d-flex justify-content-between align-items-center mb-4">
					<small class="text-muted">
						<b>Válido hasta: <span th:text="${fechaValidez}">31/12/2025</span></b>
					</small>
				</div>

				-->

				<div class="row g-3">

					<!-- TARJETA PRINCIPAL -->
					<div class="col-lg-11 mx-auto px-4">

						<!-- CONTENEDOR INTERNO -->
						<div class="row g-3">

							<!-- ===================== 1. ESTADO DEL DÍA ===================== -->
							<div class="col-md-4">
								<div class="bg-light rounded p-3 h-100">
									<h6 class="mb-3 fw-bold" style="color: rgb(14, 209, 220);">
										<i class="bi bi-person-check me-2"></i>Estado actual
									</h6>

									<p class="mb-1">
										<b>Estado:</b>
										<span th:text="${ultimoAcceso != null && ultimoAcceso.horaIngreso != null && ultimoAcceso.horaEgreso == null ? 
					                            'Dentro del centro' : 'Fuera del centro'}"></span>
									</p>

									<p class="mb-0">
										<b>Tiempo dentro:</b>
										<span th:text="${tiempoDentro != null ? tiempoDentro : ' - '}"></span>
									</p>
								</div>
							</div>

							<!-- ===================== 2. ÚLTIMO ACCESO ===================== -->
							<div class="col-md-4">
								<div class="bg-light rounded p-3 h-100">
									<h6 class="mb-3 fw-bold" style="color: rgb(14, 209, 220);">
										<i class="bi bi-clock-history me-2"></i>Último acceso
									</h6>

									<small class="mb-2" style="color: rgb(14, 209, 220)">Entrada:</small>
									<small class="d-block text-muted mb-2" th:text="${ultimoAcceso != null && ultimoAcceso.horaIngreso != null} ?
					                        ${#temporals.format(ultimoAcceso.horaIngreso, 'dd MMMM, hh:mm a')} :
					                        'Sin registro'">
									</small>

									<small class="mb-2" style="color: rgb(14, 209, 220)">Salida:</small>
									<small class="d-block text-muted" th:text="${ultimoAcceso != null && ultimoAcceso.horaEgreso != null} ?
					                        ${#temporals.format(ultimoAcceso.horaEgreso, 'dd MMMM, hh:mm a')} :
					                        'Sin registro'">
									</small>

									<!--
										
									<a href="#" class="btn btn-outline-secondary btn-sm mt-3" data-bs-toggle="modal"
										data-bs-target="#historialModal" onclick="mostrarHistorial(); return false;">
										Ver historial
									</a>
									
									-->

								</div>
							</div>

							<!-- ===================== 3. INFORMACIÓN DE FORMACIÓN ===================== -->
							<div class="col-md-4">
								<div class="bg-light rounded p-3 h-100">
									<h6 class="mb-3 fw-bold" style="color: rgb(14, 209, 220);">
										<i class="bi bi-journal-bookmark me-2"></i>Información de formación
									</h6>

									<p class="mb-1"><b>Programa:</b>
										<span th:text="${ficha != null ? ficha.nombrePrograma : ' - '}"></span>
									</p>

									<p class="mb-1"><b>N° Ficha:</b>
										<span th:text="${ficha != null ? ficha.numFicha : ' - '}"></span>
									</p>

									<!--
										<p class="mb-0"><b>Jornada:</b>
											<span th:text="${ficha != null ? ficha.jornada : ' - '}"></span>
										</p>
										-->
								</div>
							</div>

						</div>
					</div>
				</div>

			</div>
		</div>
		</div>

		<div class="container py-5">
			<div class="row g-4">
			</div>
		</div>
	</main>

	<!-- MODAL HISTORIAL -->


	<!-- MODAL PERFIL -->
	<div th:insert="~{/Aprendiz/templates_aprendiz.html::modal}"></div>

	<!-- FOOTER Y SCRIPTS GENERALES -->
	<div th:insert="~{/Aprendiz/templates_aprendiz.html::footer}"></div>
	<div th:insert="~{/Aprendiz/templates_aprendiz.html::jsFiles}"></div>

	<!-- Scripts específicos de esta página -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>


</body>

</html>